<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bag Wizard (2 colores / 2 texturas + costura)</title>

<!-- Favicon + (opcional) PWA manifest: no rompe nada -->
<link rel="icon" type="image/png" sizes="32x32" href="assets/icons/valonia-32.png">
<link rel="apple-touch-icon" sizes="180x180" href="assets/icons/valonia-180.png">
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#8e5f49">

<!-- Tipografía serif fina como Valonia (fallbacks locales) -->
<link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:wght@400;500&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#f7f7f9;
    --panel:#fff;
    --line:#e6e6e9;
    --rose:#e8bebf;
    --terracotta:#8e5f49;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);font:15px/1.45 system-ui,Segoe UI,Roboto,Arial,sans-serif;color:#222}
  .wrap{max-width:1200px;margin:24px auto;padding:0 16px}

  /* Cabecera de marca (encima del bloque derecho en desktop) */
  .brand{display:flex;justify-content:center;margin:6px 0 10px}
  .brand img{height:56px;width:auto;display:block}

  h1{
    font:400 22px/1.3 "Didot","Bodoni Moda","Playfair Display",serif;
    color:var(--terracotta);
    text-align:center;
    margin:0 0 12px;
  }

  /* GRID: bolso a la izquierda, controles a la derecha */
  .grid{
    display:grid;
    grid-template-columns: 1fr 360px;   /* bolso | controles */
    grid-template-areas: "stage controls";
    gap: 24px;
    align-items:start;
  }
  .stage-col{grid-area:stage}
  .controls-col{grid-area:controls}

  /* Escenario / canvas: SIN bordes, responsivo sin deformar */
  .stage{
    display:flex;align-items:flex-start;justify-content:center;
    padding:8px 0;
  }
  /* Mantener proporción: usamos atributos width/height del canvas y CSS solo limita ancho */
  #cv{
    display:block;
    max-width: 520px;   /* tamaño razonable en desktop */
    width: 100%;
    height: auto;       /* ← NO deformar (respeta 600x800) */
    background:transparent;
    border:0;
    border-radius:10px;
  }

  /* Panel limpio, sin cajas blancas */
  .controls{
    background:transparent; border:0; padding:0;
    display:flex;flex-direction:column; align-items:center;
  }

  .brand-small{margin:0 0 8px}
  .brand-small img{height:54px}

  .stack{width:100%;display:flex;flex-direction:column;gap:10px;align-items:stretch}

  .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
  .row label{font-size:12px;letter-spacing:.02em;color:#6b4a3d}
  select{padding:6px 8px;border:1px solid var(--line);border-radius:8px;background:#fff}
  input[type="color"]{
    -webkit-appearance:none; appearance:none;
    width:32px;height:32px;border-radius:50%;
    border:1px solid var(--line); padding:0; cursor:pointer; background:#fff;
  }
  input[type="color"]::-webkit-color-swatch{border:none;border-radius:50%}
  input[type="color"]::-moz-color-swatch{border:none;border-radius:50%}

  .actions{display:flex;gap:10px}
  button{
    cursor:pointer;padding:10px 12px;border-radius:12px;
    border:1px solid var(--line);background:var(--rose);color:#4b2f26;
    font-weight:500;
  }

  /* Formulario muy limpio (si lo tienes debajo) */
  .form{
    margin-top:28px;
    display:grid;gap:10px;
    grid-template-columns:1fr 1fr;
  }
  .form label{font-size:12px;color:#7b6a60}
  .form input,.form textarea{
    width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:10px;background:#fff;
    font:inherit
  }
  .form textarea{min-height:90px;grid-column:1 / -1}

  /* Móvil: todo centrado vertical y en orden: logo → título → bolso → controles */
  @media (max-width: 900px){
    .grid{
      grid-template-columns: 1fr;
      grid-template-areas:
        "stage"
        "controls";
      gap: 14px;
    }
    #cv{max-width: 86vw}
    .controls{align-items:center}
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="grid">
      <!-- STAGE a la izquierda -->
      <div class="stage-col">
        <div class="stage">
          <canvas id="cv" width="600" height="800"></canvas>
        </div>
      </div>

      <!-- CONTROLES a la derecha (logo + título + selects + colores + botón) -->
      <div class="controls-col">
        <div class="controls">
          <div class="brand brand-small">
            <picture>
              <source srcset="logo-valonia.svg" type="image/svg+xml">
              <img src="assets/icons/valonia-192.png" alt="Valonia">
            </picture>
          </div>
          <h1>Diseña tu Tambour</h1>

          <div class="stack">
            <div class="row">
              <label for="texA">1º CUERO · TEXTURA</label>
              <div style="display:flex;gap:8px;align-items:center">
                <select id="texA">
                  <option value="smooth">Lisa</option>
                  <option value="suede">Ante</option>
                </select>
                <input id="colA" type="color" value="#e6c1c3">
              </div>
            </div>

            <div class="row">
              <label for="texB">2º CUERO · TEXTURA</label>
              <div style="display:flex;gap:8px;align-items:center">
                <select id="texB">
                  <option value="smooth">Lisa</option>
                  <option value="suede">Ante</option>
                </select>
                <input id="colB" type="color" value="#7f503d">
              </div>
            </div>

            <div class="row" style="justify-content:flex-end">
              <button id="dl">Descargar preview</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- (Opcional) formulario debajo; si no lo usas ahora, puedes borrar este bloque -->
    <form class="form" onsubmit="return false" style="margin-top:34px">
      <div>
        <label>Nombre y apellidos</label>
        <input type="text" placeholder="Tu nombre">
      </div>
      <div>
        <label>Email</label>
        <input type="email" placeholder="tu@correo.com">
      </div>
      <div>
        <label>Teléfono</label>
        <input type="tel" placeholder="+34 ...">
      </div>
      <div>
        <label>Referencia de pedido (opcional)</label>
        <input type="text" placeholder="VL-...">
      </div>
      <div style="grid-column:1/-1">
        <label>Notas</label>
        <textarea placeholder="Color interior, largo de correas, observaciones…"></textarea>
      </div>
    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/fabric@5.3.0/dist/fabric.min.js"></script>
  <script src="js/customizer.js"></script>

  <!-- SW opcional para PWA; no afecta a nada si no existe -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', ()=>navigator.serviceWorker.register('sw.js').catch(()=>{}));
    }
  </script>
</body>
</html>